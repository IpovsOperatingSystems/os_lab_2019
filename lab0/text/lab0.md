# Лабораторная работа №0

### О курсе

Это курс "Операционные системы". Нулевая лабораторная работа будет посвящена настройке и использованию инструментов, с которыми вам придется работать весь курс.

## Whatsapp

[Группа курса в Whatsapp](https://chat.whatsapp.com/E7UXdJDNgyRL6bRxW3xXse)

Здесь будут анонсы курса. Также здесь можно задавать вопросы по лабораторным работам. Этот чат общий на три группы (МП-30, МП-34, МП-35). Мы надеемся, что вы будете помогать друг другу с решением возникающих проблем, особенно, если будете делать какую-то работу дома.

# Задание 1

## GitHub

Вам понадобится аккаунт GitHub. Поэтому, если все еще нет, то зарегистрироваться можно [здесь](https://github.com/). Теперь вам необходимо выполнить fork репозитария с заданием [отсюда](https://github.com/IpovsOperatingSystems/os_lab_2019).

## Codenvy

Основная площадка для работы. Представляет собой рабочую среду в операционной системе Linux. Здесь также необходимо зарегистрироваться - [регистрация](https://codenvy.io/site/login). Рекомендуется использовать для входа аккаунт GitHub.

### Troubleshooting

**Некоторые почтовые сервисы занесены Codenvy в черный список. Поэтому, если основной адрес электронной почты, привязанный к вашему GitHub аккаунту, входит в этот список (туда точно входят почтовые сервисы yandex.ru и mail.ru), то при регистрации у вас возникнет ошибка. Чтобы зарегистрироваться вам необходимо сменить основной адрес на GitHub (это можно сделать в Settings). Известно, что почта в домене gmail.com и edu.miet.ru точно подходит для регистрации.**

![](pics/mailproblem.png)

## Создаем workspace и выкачиваем репозиторий

После регистрации необходимо создать новый workspace. Для этого во вкладке workspaces необходимо нажать "Add Workspace".
![](pics/add_workspace_codenvy.png)

Далее необходимо указать имя машины, дефолтный стек, в нашем случае C++, и нажать кнопку "Create".
![](pics/new_workspace.png)

Запускаем workspace, если он не был запущен автоматически, и переходим в него.
![](pics/launch_workspace.png)
Ждем завершения загрузки.
![](pics/launch_workspace2.png)

## Импорт проектов

Теперь необходимо заимпортировать проект. Для этого необходимо перейти Workspace -> Import Project.

В пункте Source Control выбрать Github, в строке URL указать ссылку вашего репозитария(который был создан после fork) с заготовкой для лабы (это важно потому, что иначе вам придется разбираться, как потом внести изменения в Ваш репозитарий).

![](pics/import_project.png)

Если все было сделано правильно, то вы увидите проект в Project Explorer.
![](pics/imported.png)

## Terminal

Большинство заданий курса будет задействовать терминал. Окно терминала автоматически откроется, как только закончится запуск workspace, но по мере необходимости вы можете открывать бесконечно много новых вкладок с терминалом.
![](pics/terminal.png)

## Навигация
По умолчанию *Codenvy* открывает терминал в директории */projects/*. 

На этом этапе можно поговорить, как *Codenvy* вообще работает. Вы уже создали workspace, а значит *Codenvy*, где-то хранит под него данные в виде проектов. Когда вы запускаете workspace *Codenvy* запускает для вас [Docker](https://ru.wikipedia.org/wiki/Docker) контейнер, вам не обязательно знать, как он работает, но **что важно помнить: каждый раз, когда вы завершаете работу в workspace, сохраняются только ваши проекты. Все, что будет сохранено вне проектов может быть утерено при новом запуске**. 

Немножко базовых функций для навигации по файловой системе:

* `cd [path]` - команда для смены рабочей директории
* `ls [path]` - показывает содержимое директории
* `pwd` - команда, чтобы определить, в какой директории вы находитесь сейчас
* `touch file` - команда, которая создаст для вас пустой файл.
* `mkdir dir` - команда для создания новой директории.
* `cp file1 file2` - копирует из одного файла в другой
* `mv file1 file2` - перемещает файл из одного места в другое
* `rm file` - удаление файла
* `echo` - вывод в окно терминала

# Задание 2

Вам необходимо разобраться, как работают эти команды более детально. Время познакомиться с еще одной особенностью курса - наличие заданий на поиск информации. Многие задания этого курса будут заключаться в том, чтобы найти решение самому, поэтому *google* ваш главный помощник. Это очень сложный навык, поэтому в первый раз мы протянем вам [руку помощи](http://lmgtfy.com/?q=filesystem+navigation+linux). 

Лучший интро по версии преподавателей можно найти [тут](https://www.digitalocean.com/community/tutorials/basic-linux-navigation-and-file-management)

**В качестве задания вам необходимо с помощью терминала:**

* в проекте `lab0` создать папку `hello`
* внутри этой папки создать пустой файл `empty`
* скопировать файл `hello.c` из `lab0/src` в новую папку
* переименовать его в `newhello.c`

## update.sh

В предыдущем задании вы уже столкнулись с выполнением программ в терминале ОС Linux. Есть два способа вызвать программу в терминале:

1. Указать ее полный или относительный путь. Например утилита mv (move), которая находится в директории /bin/ может быть вызвана `/bin/mv`, но если вы уже находитесь в директории /bin/ вы можете вызвать ее по относительному пути `./mv`.
2. Добавить директорию, в которой находится программа в переменную окружения `PATH`. Тогда вы сможете вызывать программу, не указывая ее путь, например: `touch empty`. Базовые утилиты, которые вы уже использовали для создания новой папки, копирования и переименования файлов, добавлены в `PATH` по умолчанию.

В рамках курса мы будем использовать различные консольные утилиты, которые  *Codenvy* по умолчанию не устанавливает. А еще *Codenvy* не всегда сохраняет вам окружение между запусками, а это значит, что при каждом новом запуске `workspace` вам возможно придется переустанавливать некоторый набор утилит. Мы постарались облегчить вам этот процесс, добавив в корень проекта скрипт `update.sh`.

# Задание 3
<!-- ping устанавливается в update.sh -->
**Запустите update.sh, который находится в корне проекта** 

Чтобы проверить, что вы все сделали верно, выполните команду: `ping ya.ru -с 5`, если вы увидели, что-то вроде этого, то вы все сделали правильно:

	PING ya.ru (87.250.250.242) 56(84) bytes of data.
	64 bytes from ya.ru (87.250.250.242): icmp_seq=1 ttl=38 time=107 ms
	64 bytes from ya.ru (87.250.250.242): icmp_seq=2 ttl=38 time=107 ms
	64 bytes from ya.ru (87.250.250.242): icmp_seq=3 ttl=38 time=107 ms
	64 bytes from ya.ru (87.250.250.242): icmp_seq=4 ttl=38 time=107 ms
	64 bytes from ya.ru (87.250.250.242): icmp_seq=5 ttl=38 time=107 ms
	
	--- ya.ru ping statistics ---
	5 packets transmitted, 5 received, 0% packet loss, time 4004ms
	rtt min/avg/max/mdev = 107.155/107.176/107.204/0.293 ms

## gcc

Ваши проекты это обычно лишь программный код, который представляет собой текстовые файлы, но ваш код компилируется не с помощью магии (даже, если в `Visual Studio` это выглядит именно так) - вам нужен компилятор. Помните, когда вы создавали `workspace` вы указали стек - C++? Таким образом вы попросили *Codenvy* установить gcc для вас, а значит мы уже можем выполнить первую команду в терминале:

`gcc -v`

Вы должны увидеть что-то типо такого:
![](pics/gcc_version.png)

Если это так, то смело читайте дальше, если вы увидели сообщение "command not found", то вероятнее всего вы не выбрали стек C++ при создании `workspace`, или не выполнили `update.sh`, в котором продублирована установка компилятора.

## Задание 4

После выполнения всех заданий у вас должна быть создана папка `hello` с `newhello.c` внутри. Необходимо его скомпилировать: `gcc newhello.c -o hello_world`.

В вашей папке должен появиться исполняемый файл **hello_world**. Запустите его. Вы должны увидеть сообщение "Hello, world!".

## Ваши изменения должны попадать в GitHub

Перед тем, как сдавать работу преподавателю, необходимо закоммитить ваши изменения, для этого из корня проекта необходимо выполнить: 

1. `git add lab0/src/hello/empty` - добавит ваш созданный пустой файл в репо
2. `git add lab0/src/hello/newhello.c` - добавит ваш c-файл в репозиторий
4. Выполнить `git status` и убедиться, что вы добавили в репозиторий только файлы **empty и newhello.c**. **Файл hello_world не должен быть добавлен!**
5. Выполнить `git commit -m "добавлен hello.c и empty".`
6. Выполнить `git push`
7. Убедиться через веб интерфейс GitHub, что ваши файлы закоммичены и находятся в репозитории.

*В какой-то момент `git` попросит вас указать почту и ваше имя: **codenvy** не позволит вам установить глобальный конфиг, поэтому необходимо будет опустить `--global` в вашей команде, чтобы настройки дествовали только для текущего репозитория.*

## Про обратную связь

Материалы данного курса могут содержать ошибки, опечатки и неточности. Если вы заметили, что-то, что нужно поправить напишите об этом в whatsup канал.
