# Отчет по ЛР №2

## Задание 1

Запуск программы:
```shell
cc main.c swap.c -o swap && ./swap
```

cc - компилятор C <br>
main.c & swap.c - C файлы <br>
flag -o - указывает на то, что исполняемый файл должен носить название swap <br>
./swap - запускаем наш исполняемый файл, к-рый является нашей программой

## Задание 2

Запуск программы:
```shell
cc main.c revert_string.c -o revert && ./revert test
```

cc - компилятор C <br>
main.c & revert_string.c  - C файлы <br>
flag -o - указывает на то, что исполняемый файл должен носить название swap <br>
./swap - запускаем наш исполняемый файл, к-рый является нашей программой

1) **Выделение и освобождение памяти в куче Си.** <br>
Выделение: malloc - выделение памяти в куче с определенным размером <br>
Освобождение: free - освобождение памяти, т.е. занятых ячеек памяти 
2) **Разница между стеком и кучей** <br>
Стек - состоит из фиксированного кол-ва ячеек, каждая из них хранит в себе значения. Сам Си выделяет под это память, хранит локал. пер-ые, адреса, рез-ы промежут. вычислений <br> 
Куча - область памяти, которая нужна для динамической работы нашей программы, язык Си дает пользователю возможность выделять память в ОП для его программы
   (работа происходит через указатели) <br>
<br>
Отличия заключаются в том, что стек имеет ограничение по размеру, а также управлением этими участками памяти

3) **Использование аргументов командной строки**

Программа может использовать аргументы, переданные в командную строку для этого стоит передать аргументы в главную функцию (main), такие переменнные, как: <br>
int argc - кол-во аргументов <br>
char *argv[] - массив наших аргументов

## Задание 3

1) Компиляция revert.c в статическую библиотеку:
```shell
cc -c revert.c -o revert.o # Компиляция revert.c в объектный файл revert.o
ar rcs libstat_revert.a revert.o  # Создание статической библиотеки libstat_revert.a из объектного файла revert.o
```

2) Компиляция revert.c в динамическую библиотеку:

```shell
cc -shared revert.c -o libdyn_revert.so  # Компиляция revert.c в динамическую библиотеку libdyn_revert.so
```

3) Залинковывание статической библиотеки в приложение с main.c:

```shell
cc main.c -L. -lstat_revert.a -o stat  # Залинковывание main.c с использованием статической библиотеки libstat_revert.a
```

4) Залинковывание динамической библиотеки в приложение с main.c:

```shell
cc main.c -L. -ldyn_revert.so -o dyn # Залинковывание main.c с использованием динамической библиотеки libdyn_revert.a
```

1) **Основы работы компилятора: препроцессор, компилятор, линковщик. Их роли и порядок работы.**

i. Препроцессор: Препроцессор выполняет предварительную обработку исходного кода, добавляя или удаляя определенные части кода. 
Результатом работы препроцессора является измененный исходный код. <br>

ii. Компилятор: Компилятор принимает препроцессированный исходный код и преобразует его в машинный код, который может быть исполнен компьютером. <br>

iii. Линковщик: Линковщик объединяет машинный код, сгенерированный компилятором, с другими библиотеками и объектными файлами, необходимыми для выполнения программы. <br>

2) **Что такое статическая и динамическая линковка. В чем разница?**

Статическая линковка - все необходимые библиотеки и модули программы включаются непосредственно в исполняемый файл программы во время компиляции. Таким образом, все функции и ресурсы программы находятся в одном файле <br>
Динамическая линковка - исполняемый файл программы ссылается на внешние библиотеки и модули, которые загружаются в память во время выполнения программы. Таким образом, исполняемый файл является более компактным <br>

3) **Опции компилятора: -I, -L, -l, -shared, -o, -с, -fPIC**

-I: Указывает каталог для поиска включаемых файлов. <br>
-L: Указывает каталог для поиска файлов библиотеки. <br>
-l: Указывает библиотеку для создания ссылки. Например, -lmath ссылается на математическую библиотеку. <br>
-общий доступ: генерирует общий объектный файл (библиотеку динамических ссылок) вместо исполняемого файла. <br>
-o: указывает имя выходного файла. <br>
-c: Компилирует исходные файлы в объектные файлы без привязки. <br>
-fPIC: генерирует позиционно-независимый код, который необходим для создания разделяемых библиотек. <br>


4) **Утилита ar**

ar - утилита, позволяет архивировать данные с кастомным именем; формат .a/.ar

5) **Переменная окружения LD_LIBRARY_PATH**

LD_LIBRARY_PATH - это переменная окружения в Linux, которая сообщает системе, где найти общие библиотеки, необходимые программе во время выполнения.

## Задание 4

```shell
cc -I../revert_string/ -o tests tests.c ../revert_string/revert_string.c -lcunit && ./tests
```